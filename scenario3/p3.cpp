#include <cstdio>
#include <cstring>

class BaseGreeter
{
public:
    void setName(char *name)
    {
        strcpy(m_name, name);
    }

    virtual void greet() = 0;

protected:
    char m_name[256];
};

class ClassyGreeter : public BaseGreeter
{
public:
    virtual void greet()
    {
        printf("Good day %s!\n", m_name);
    }
};

class SeafaringGreeter : public BaseGreeter
{
public:
    virtual void greet()
    {
        printf("Ahoy %s!\n", m_name);
    }
};

int main(int argc, char **argv)
{
    char name[512];

    printf("And what do we call you?\n");
    fgets(name, sizeof(name), stdin);
    name[strlen(name) - 1] = '\0';

    ClassyGreeter *cg = new ClassyGreeter();
    SeafaringGreeter *sg = new SeafaringGreeter();

    cg->setName(name);
    sg->setName(name);

    // select a greeter based on the provided name
    BaseGreeter *g = strlen(name) % 2 == 0 ? (BaseGreeter *)cg : (BaseGreeter *)sg;
    g->greet();
}